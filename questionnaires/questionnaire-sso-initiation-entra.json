[
  {
    "id": "q1_login_flow",
    "text": "Where do people usually start sign-in?",
    "options": ["In a company portal (MyApps/M365 app launcher)", "From the app’s web address or bookmark", "Both", "I'm not sure"],
    "rationale": "Portal-first use leans IdP-initiated; starting at the app leans SP-initiated. Not decisive by itself.",
    "next": ["q3_initiation_support"]
  },
  {
    "id": "q3_initiation_support",
    "text": "Which SSO start methods does the app support?",
    "options": ["Start from the app (SP-initiated)", "Start from the portal (IdP-initiated)", "Both", "I'm not sure"],
    "rationale": "Feasibility gate: if only one is supported, that is the pattern.",
    "next": ["q9_deep_linking"]
  },
  {
    "id": "q9_deep_linking",
    "text": "Do people need links that open straight into a specific page or module?",
    "options": ["Yes, often", "No", "Sometimes", "I'm not sure"],
    "rationale": "Frequent deep links tend to work best with SP-initiated (IdP with RelayState can also work if supported).",
    "next": ["q51_multigeo"]
  },
  {
    "id": "q51_multigeo",
    "text": "Is the app deployed in more than one region or with region-specific URLs?",
    "options": ["Yes", "No", "I'm not sure"],
    "rationale": "Multi-region/multi-instance commonly favors SP-initiated or separate app objects to land on the right endpoint.",
    "next": ["q16_idp_multiple"]
  },
  {
    "id": "q16_idp_multiple",
    "text": "Do people from more than one organization/IdP need to sign in?",
    "options": ["Yes, multiple organizations/IdPs", "No, only our organization", "I'm not sure"],
    "rationale": "Multi-IdP scenarios often lean SP-initiated with realm discovery or multiple enterprise app objects.",
    "next": ["q20_idp_portal"]
  },
  {
    "id": "q20_idp_portal",
    "text": "Should the app appear in the company portal (MyApps/M365 app launcher)?",
    "options": ["Yes", "No", "I'm not sure"],
    "rationale": "Strong preference for portal discoverability leans IdP-initiated.",
    "next": ["q84_saas_constraints"]
  },
  {
    "id": "q84_saas_constraints",
    "text": "Does the vendor say which SSO pattern you must use?",
    "options": ["Yes — only IdP-initiated", "Yes — only SP-initiated", "No restrictions", "I'm not sure"],
    "rationale": "Vendor mandates override preference and simplify the decision.",
    "next": ["q37_saas_catalog"]
  },
  {
    "id": "q37_saas_catalog",
    "text": "Is the app listed in the Entra gallery (prebuilt SAML template)?",
    "options": ["Yes", "No", "I'm not sure"],
    "rationale": "Gallery templates usually encode the recommended SAML initiation pattern.",
    "next": ["q58_failback"]
  },
  {
    "id": "q58_failback",
    "text": "If SSO is down, do you need a way to sign in locally?",
    "options": ["Yes", "No", "I'm not sure"],
    "rationale": "Local fallback journeys typically pair more cleanly with SP-initiated flows.",
    "next": ["q14_failover"]
  },
  {
    "id": "q14_failover",
    "text": "Do you have DR/failover environments with different sign-in endpoints?",
    "options": ["Yes", "No", "I'm not sure"],
    "rationale": "Multiple endpoints/DR often favor SP-initiated or multiple app objects for targeted landing.",
    "next": ["q43_signature"]
  },
  {
    "id": "q43_signature",
    "text": "Does the app require a signed SAML authentication request from the app?",
    "options": ["Yes, mandatory", "No", "I'm not sure"],
    "rationale": "If a signed AuthnRequest is mandatory, that implies SP-initiated and affects certificate handling.",
    "next": ["q101_entity_id"]
  },

  // -------- The following are the attached SAML configuration items (kept) --------

  {
    "id": "q101_entity_id",
    "text": "Identifier (Entity ID)",
    "options": ["Paste the exact value", "I'm not sure"],
    "rationale": "The unique ID that identifies your application to Microsoft Entra ID.",
    "next": ["q102_reply_url_acs"]
  },
  {
    "id": "q102_reply_url_acs",
    "text": "Reply URL (Assertion Consumer Service URL)",
    "options": ["Paste one or more URLs (primary first)", "I'm not sure"],
    "rationale": "The reply URL is where the application expects to receive the SAML response (assertion).",
    "next": ["q104_sign_on_url"]
  },
  {
    "id": "q104_sign_on_url",
    "text": "Sign on URL (Optional)",
    "options": ["Paste the SP-initiated sign-in page URL", "Not applicable", "I'm not sure"],
    "rationale": "Sign on URL is used if you would like to perform service provider-initiated single sign-on. This value is the sign-in page URL for your application.",
    "next": ["q116_logout_url"]
  },
  {
    "id": "q116_logout_url",
    "text": "Logout URL (Optional)",
    "options": ["Paste the logout URL", "Not applicable", "I'm not sure"],
    "rationale": "This URL is used to send the SAML logout response back to the application.",
    "next": ["q201_attributes_claims"]
  },
  {
    "id": "q201_attributes_claims",
    "text": "Attributes & Claims — Which attributes/claims does the application require? (Choose all that apply)",
    "options": ["Email Address", "First Name", "Custom", "None/Default"],
    "rationale": "Provides process of authenticating users and managing application-dependent attributes.",
    "next": ["q202_app_roles"]
  },
  {
    "id": "q202_app_roles",
    "text": "App-Roles — Which role does the application require? (Choose all that apply)",
    "options": ["User", "Custom", "None/Default"],
    "rationale": "App roles determine the role-based access to an application.",
    "next": ["q203_ad_groups_users"]
  },
  {
    "id": "q203_ad_groups_users",
    "text": "AD Groups/Users — Which AD Group/User requires access to the application? (Choose all that apply)",
    "options": ["Custom", "None/Default"],
    "rationale": "AD Groups/Users give permission to access the application.",
    "next": []
  }
]
